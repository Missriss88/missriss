import streamlit as st

# í€´ì¦ˆ ë°ì´í„°ì—ì„œ ì´ë¯¸ì§€ URL ë¶€ë¶„ì„ ì œê±°í–ˆìŠµë‹ˆë‹¤.
quiz_data = [
    {
        "hint": "ì ë²½ëŒ€ì „ì—ì„œ ë™ë‚¨í’ì„ ë¶ˆê²Œ í•˜ì—¬ ì¡°ì¡°ì˜ ëŒ€êµ°ì„ ë¬¼ë¦¬ì¹˜ëŠ” ë° ê²°ì •ì ì¸ ì—­í• ì„ í•œ ì±…ì‚¬ì…ë‹ˆë‹¤.",
        "options": ["ì‚¬ë§ˆì˜", "ì œê°ˆëŸ‰", "ì£¼ìœ ", "ë°©í†µ"],
        "answer": "ì œê°ˆëŸ‰",
        "explanation": "ì œê°ˆëŸ‰ì€ ì‚¼êµ­ì‹œëŒ€ ì´‰ë‚˜ë¼ì˜ ì¬ìƒìœ¼ë¡œ, ë›°ì–´ë‚œ ì§€ëµê³¼ í†µì°°ë ¥ìœ¼ë¡œ ìœ ë¹„ë¥¼ ë„ì™€ ì´‰í•œì„ ì„¸ìš°ëŠ” ë° í° ê³µì„ ì„¸ì› ìŠµë‹ˆë‹¤. 'ì‚¼ê³ ì´ˆë ¤', 'ì¹ ì¢…ì¹ ê¸ˆ' ë“±ì˜ ê³ ì‚¬ë¡œë„ ìœ ëª…í•©ë‹ˆë‹¤."
    },
    {
        "hint": "'ë¬´ì‹ (æ­¦ç¥)'ì´ë¼ ë¶ˆë¦¬ë©°, ì²­ë£¡ì–¸ì›”ë„ë¥¼ ë“¤ê³  ì í† ë§ˆë¥¼ íƒ„ ëª¨ìŠµìœ¼ë¡œ ìœ ëª…í•œ èœ€ë‚˜ë¼ì˜ ì¥ìˆ˜ì…ë‹ˆë‹¤.",
        "options": ["ì¥ë¹„", "ì¡°ìš´", "ë§ˆì´ˆ", "ê´€ìš°"],
        "answer": "ê´€ìš°",
        "explanation": "ê´€ìš°ëŠ” ìœ ë¹„, ì¥ë¹„ì™€ ë„ì›ê²°ì˜ë¥¼ ë§ºì€ í˜•ì œë¡œ, ì˜ë¦¬ì™€ ìš©ë§¹ì˜ ìƒì§•ì…ë‹ˆë‹¤. ê·¸ì˜ ë¶‰ì€ ì–¼êµ´ê³¼ ê¸´ ìˆ˜ì—¼ì€ ê·¸ì˜ íŠ¸ë ˆì´ë“œë§ˆí¬ì´ê¸°ë„ í•©ë‹ˆë‹¤."
    },
    {
        "hint": "ë‚œì„¸ì˜ ê°„ì›…ì´ë¼ ë¶ˆë¦¬ë©°, ìœ„ë‚˜ë¼ì˜ ê¸°í‹€ì„ ë‹¦ì€ ê°•ë ¥í•œ êµ°ì£¼ì…ë‹ˆë‹¤. 'ë‚´ê°€ ì²œí•˜ë¥¼ ë²„ë¦´ì§€ì–¸ì •, ì²œí•˜ê°€ ë‚˜ë¥¼ ë²„ë¦¬ê²Œ í•˜ì§€ëŠ” ì•Šê² ë‹¤'ëŠ” ëª…ì–¸ì„ ë‚¨ê²¼ìŠµë‹ˆë‹¤.",
        "options": ["ì¡°ì¡°", "ìœ ë¹„", "ì†ê¶Œ", "ì›ì†Œ"],
        "answer": "ì¡°ì¡°",
        "explanation": "ì¡°ì¡°ëŠ” í›„í•œ ë§ì˜ ì •ì¹˜ê°€, êµ°ì‚¬ê°€ì´ì ì‹œì¸ìœ¼ë¡œ, ë¶ì¤‘êµ­ì„ í†µì¼í•˜ê³  ìœ„ë‚˜ë¼ì˜ ê¸°ì´ˆë¥¼ ì„¸ì› ìŠµë‹ˆë‹¤. ëŠ¥ë ¥ ìœ„ì£¼ì˜ ì¸ì¬ ë“±ìš©ìœ¼ë¡œë„ ìœ ëª…í•©ë‹ˆë‹¤."
    },
    {
        "hint": "ë°©ì²œí™”ê·¹ì„ íœ˜ë‘ë¥´ë©° ë‹¹ëŒ€ ìµœê³ ì˜ ë¬´ë ¥ì„ ìë‘í–ˆë˜ ì¥ìˆ˜ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ì—¬ëŸ¬ ì£¼êµ°ì„ ë°°ì‹ í•˜ì—¬ 'ì‚¼ì„±ì„ ì„¬ê¸´ ì¢…'ì´ë¼ëŠ” ë¹„íŒì„ ë°›ê¸°ë„ í–ˆìŠµë‹ˆë‹¤.",
        "options": ["ì†ì±…", "ì—¬í¬", "ì „ìœ„", "ê°ë…•"],
        "answer": "ì—¬í¬",
        "explanation": "ì—¬í¬ëŠ” 'ì¸ì¤‘ì—¬í¬, ë§ˆì¤‘ì í† (ì‚¬ëŒ ì¤‘ì—ëŠ” ì—¬í¬, ë§ ì¤‘ì—ëŠ” ì í† ë§ˆ)'ë¼ëŠ” ë§ì´ ìˆì„ ì •ë„ë¡œ ê°œì¸ì˜ ë¬´ë ¥ì´ ì¶œì¤‘í–ˆë˜ ì¸ë¬¼ì…ë‹ˆë‹¤. ê·¸ì˜ ë¬´ë ¥ì€ íƒ€ì˜ ì¶”ì¢…ì„ ë¶ˆí—ˆí–ˆìŠµë‹ˆë‹¤."
    },
    {
        "hint": "ê°•ë™ì˜ í˜¸ë‘ì´ë¼ ë¶ˆë¦° ì†ê²¬ì˜ ì•„ë“¤ì´ì, ì˜¤ë‚˜ë¼ë¥¼ ê±´êµ­í•œ ì†ê¶Œì˜ í˜•ì…ë‹ˆë‹¤. ì Šì€ ë‚˜ì´ì— ê°•ë™ì„ í‰ì •í•˜ì—¬ 'ì†ŒíŒ¨ì™•'ì´ë¼ ë¶ˆë ¸ìŠµë‹ˆë‹¤.",
        "options": ["ì†ì±…", "ì£¼ìœ ", "ì†ê²¬", "ìœ¡ì†"],
        "answer": "ì†ì±…",
        "explanation": "ì†ì±…ì€ ì•„ë²„ì§€ ì†ê²¬ì˜ ìœ ì§€ë¥¼ ì´ì–´ë°›ì•„ ë‹¨ê¸°ê°„ì— ê°•ë™ ì§€ì—­ì„ ì œíŒ¨í•˜ë©° ì˜¤ë‚˜ë¼ì˜ ê¸°ë°˜ì„ ë§ˆë ¨í•œ ë›°ì–´ë‚œ êµ°ì£¼ì…ë‹ˆë‹¤. ì£¼ìœ ì™€ëŠ” ì˜í˜•ì œë¥¼ ë§ºì€ ë§‰ì—­í•œ ì‚¬ì´ì˜€ìŠµë‹ˆë‹¤."
    },
    {
        "hint": "ì¥íŒíŒŒì—ì„œ ìœ ë¹„ì˜ ì•„ë“¤ ìœ ì„ ì„ í’ˆì— ì•ˆê³  ì¡°ì¡°ì˜ ëŒ€êµ°ì„ ëš«ì–´ë‚¸, ìš©ë§¹í•˜ê³  ì¶©ì„±ìŠ¤ëŸ¬ìš´ ì¥ìˆ˜ì…ë‹ˆë‹¤.",
        "options": ["í™©ì¶©", "ìœ„ì—°", "ì¡°ìš´", "ê°•ìœ "],
        "answer": "ì¡°ìš´",
        "explanation": "ì¡°ìš´(ì: ìë£¡)ì€ ì´‰ì˜ ì˜¤í˜¸ëŒ€ì¥êµ° ì¤‘ í•œ ëª…ìœ¼ë¡œ, ì‹¤ìˆ˜ëŠ” ì—†ìœ¼ë©´ì„œë„ í° ê³µì„ ì—¬ëŸ¬ ë²ˆ ì„¸ì›Œ ìœ ë¹„ì˜ ê¹Šì€ ì‹ ì„ì„ ë°›ì•˜ìŠµë‹ˆë‹¤. ë°±ë§ˆë¥¼ íƒ„ ëª¨ìŠµìœ¼ë¡œ ìì£¼ ë¬˜ì‚¬ë©ë‹ˆë‹¤."
    },
    {
        "hint": "í•œë‚˜ë¼ì˜ í™©ì†ì„ ìì²˜í•˜ë©° 'ì¸(ä»)'ì„ ê¸°ì¹˜ë¡œ ë‚´ê±¸ê³  ì´‰í•œì„ ì„¸ìš´ ì´ˆëŒ€ í™©ì œì…ë‹ˆë‹¤.",
        "options": ["ìœ ì„ ", "ìœ í‘œ", "ìœ ë¹„", "ìœ ì¥"],
        "answer": "ìœ ë¹„",
        "explanation": "ìœ ë¹„(ì: í˜„ë•)ëŠ” ë•ì„ ì¤‘ì‹œí•˜ëŠ” êµ°ì£¼ë¡œ, ìˆ˜ë§ì€ ì¸ì¬ë“¤ì´ ê·¸ì˜ ì¸í’ˆì— ì´ëŒë ¤ ë”°ëìŠµë‹ˆë‹¤. ê´€ìš°, ì¥ë¹„ì™€ ë§ºì€ 'ë„ì›ê²°ì˜'ëŠ” ì²œí•˜ì— ìœ ëª…í•©ë‹ˆë‹¤."
    },
    {
        "hint": "ì¥íŒêµ ìœ„ì—ì„œ ë‹¨ì‹ ìœ¼ë¡œ ì¡°ì¡°ì˜ ëŒ€êµ°ì„ ë§‰ì•„ì„ , ë¶ˆê°™ì€ ì„±ê²©ê³¼ ì—„ì²­ë‚œ ìš©ë§¹ì„ ìë‘í•œ ì¥ìˆ˜ì…ë‹ˆë‹¤.",
        "options": ["ì¥ë¹„", "í—ˆì €", "í•˜í›„ëˆ", "ì¥ë£Œ"],
        "answer": "ì¥ë¹„",
        "explanation": "ì¥ë¹„(ì: ìµë•)ëŠ” ìœ ë¹„, ê´€ìš°ì˜ ì˜í˜•ì œë¡œ, ê·¸ì˜ ìš©ë§¹ì€ ë§Œ ëª…ì˜ êµ°ì‚¬ì™€ ë§ë¨¹ëŠ”ë‹¤ê³  í‰ê°€ë°›ì•˜ìŠµë‹ˆë‹¤. ì¥íŒ”ì‚¬ëª¨ë¼ëŠ” ê¸´ ì°½ì„ ì£¼ ë¬´ê¸°ë¡œ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤."
    },
    {
        "hint": "í˜• ì†ì±…ì˜ ë’¤ë¥¼ ì´ì–´ ê°•ë™ì„ ì•ˆì •ì ìœ¼ë¡œ ë‹¤ìŠ¤ë ¸ìœ¼ë©°, ë¶‰ì€ ìˆ˜ì—¼ê³¼ í‘¸ë¥¸ ëˆˆì„ ê°€ì¡Œë‹¤ê³  ë¬˜ì‚¬ë˜ëŠ” ì˜¤ë‚˜ë¼ì˜ ì´ˆëŒ€ í™©ì œì…ë‹ˆë‹¤.",
        "options": ["ì†ê²¬", "ì†ê¶Œ", "ì†ë“±", "ì†í˜¸"],
        "answer": "ì†ê¶Œ",
        "explanation": "ì†ê¶Œ(ì: ì¤‘ëª¨)ì€ ì Šì€ ë‚˜ì´ì— ê°•ë™ì˜ ì£¼ì¸ì´ ë˜ì—ˆìœ¼ë‚˜, ë›°ì–´ë‚œ ì¸ì¬ ê´€ë¦¬ì™€ ì •ì¹˜ë ¥ìœ¼ë¡œ ì˜¤ë‚˜ë¼ë¥¼ ë°˜ì„ ìœ„ì— ì˜¬ë ¤ë†“ì•˜ìŠµë‹ˆë‹¤. ì ë²½ëŒ€ì „ì—ì„œ ìœ ë¹„ì™€ ì—°í•©í•˜ì—¬ ì¡°ì¡°ë¥¼ ê²©íŒŒí–ˆìŠµë‹ˆë‹¤."
    },
    {
        "hint": "ì œê°ˆëŸ‰ì˜ ìˆ™ëª…ì˜ ë¼ì´ë²Œì´ì, ìœ„ë‚˜ë¼ì˜ ê¶Œë ¥ì„ ì¥ì•…í•˜ì—¬ í›—ë‚  ì†ìê°€ ì„¸ìš¸ ì§„ë‚˜ë¼ì˜ ê¸°í‹€ì„ ë§ˆë ¨í•œ ì¸ë¬¼ì…ë‹ˆë‹¤.",
        "options": ["ê°€í›„", "ê³½ê°€", "ìˆœìš±", "ì‚¬ë§ˆì˜"],
        "answer": "ì‚¬ë§ˆì˜",
        "explanation": "ì‚¬ë§ˆì˜(ì: ì¤‘ë‹¬)ëŠ” ë›°ì–´ë‚œ ì§€ëµê³¼ ì¸ë‚´ì‹¬ìœ¼ë¡œ ì œê°ˆëŸ‰ì˜ ë¶ë²Œì„ ì—¬ëŸ¬ ì°¨ë¡€ ë§‰ì•„ëƒˆìŠµë‹ˆë‹¤. 'ê³ í‰ë¦‰ ì‚¬ë³€'ì„ í†µí•´ ìœ„ë‚˜ë¼ì˜ ì‹¤ê¶Œì„ ì¥ì•…í–ˆìŠµë‹ˆë‹¤."
    }
]

# ì„¸ì…˜ ìƒíƒœ ì´ˆê¸°í™”
if 'current_question' not in st.session_state:
    st.session_state.current_question = 0
    st.session_state.score = 0
    st.session_state.answered = False
    st.session_state.user_answer = None

# --- ì•± UI êµ¬ì„± ---

st.title("âš”ï¸ ì‚¼êµ­ì§€ ì¸ë¬¼ í€´ì¦ˆ (í…ìŠ¤íŠ¸ ë²„ì „) âš”ï¸")
st.write("íŒíŠ¸ë¥¼ ë³´ê³  ì‚¼êµ­ì§€ì˜ ì˜ì›…ë“¤ì„ ë§ì¶°ë³´ì„¸ìš”!")
st.write("---")

# í€´ì¦ˆ ì¢…ë£Œ í™”ë©´
if st.session_state.current_question >= len(quiz_data):
    st.header(f"ğŸ‰ í€´ì¦ˆ ì¢…ë£Œ! ë‹¹ì‹ ì˜ ìµœì¢… ì ìˆ˜ëŠ”: {st.session_state.score} / {len(quiz_data)}ì  ğŸ‰")
    
    score_percentage = st.session_state.score / len(quiz_data)
    if score_percentage == 1.0:
        st.success("ëŒ€ë‹¨í•©ë‹ˆë‹¤! ë‹¹ì‹ ì€ ì§„ì •í•œ ì‚¼êµ­ì§€ ì „ë¬¸ê°€ì…ë‹ˆë‹¤!")
        st.balloons()
    elif score_percentage >= 0.7:
        st.info("í›Œë¥­í•´ìš”! ì‚¼êµ­ì§€ì— ëŒ€í•´ ë§ì´ ì•Œê³  ê³„ì‹œëŠ”êµ°ìš”.")
    else:
        st.warning("ì¡°ê¸ˆ ì•„ì‰½ë„¤ìš”. ë‹¤ì‹œ ë„ì „í•´ì„œ ì‚¼êµ­ì§€ ì˜ì›…ë“¤ê³¼ ë” ì¹œí•´ì ¸ ë³´ì„¸ìš”!")

    if st.button("ë‹¤ì‹œ í’€ê¸°"):
        st.session_state.current_question = 0
        st.session_state.score = 0
        st.session_state.answered = False
        st.session_state.user_answer = None
        st.rerun()
else:
    # í€´ì¦ˆ ì§„í–‰ í™”ë©´
    q_idx = st.session_state.current_question
    question = quiz_data[q_idx]
    
    st.subheader(f"ë¬¸ì œ {q_idx + 1} / {len(quiz_data)}")
    # st.image(...) ë¼ì¸ì„ ì‚­ì œí–ˆìŠµë‹ˆë‹¤.
    st.info(f"**íŒíŠ¸:** {question['hint']}")

    if not st.session_state.answered:
        with st.form(key=f"quiz_form_{q_idx}"):
            user_answer = st.radio(
                "ì´ ì¸ë¬¼ì€ ëˆ„êµ¬ì¼ê¹Œìš”?",
                options=question["options"],
                index=None
            )
            submit_button = st.form_submit_button("ì •ë‹µ í™•ì¸")

        if submit_button and user_answer:
            st.session_state.answered = True
            st.session_state.user_answer = user_answer
            st.rerun()

    if st.session_state.answered:
        correct_answer = question["answer"]
        
        if st.session_state.user_answer == correct_answer:
            if 'score_counted' not in st.session_state or not st.session_state.score_counted:
                 st.session_state.score += 1
                 st.session_state.score_counted = True
            st.success("ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰")
        else:
            st.error(f"ì˜¤ë‹µì…ë‹ˆë‹¤. ì •ë‹µì€ '{correct_answer}'ì…ë‹ˆë‹¤. ğŸ˜¥")
            st.session_state.score_counted = True
        
        st.markdown(f"**í•´ì„¤:** {question['explanation']}")

        if st.button("ë‹¤ìŒ ë¬¸ì œë¡œ"):
            st.session_state.current_question += 1
            st.session_state.answered = False
            st.session_state.user_answer = None
            st.session_state.score_counted = False
            st.rerun()